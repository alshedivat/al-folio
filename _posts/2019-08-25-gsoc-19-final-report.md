---
layout: post
title:  GSoC '19 Final Report
date: 2019-08-25 08:00:00
description:
tags: gsoc tensorflow
categories: gsoc
thumbnail: assets/img/swiftplot.png
---

<figure data-orig-width="1800" data-orig-height="699" class="tmblr-full"><img src="https://64.media.tumblr.com/20d49ccec9f989752fbe78eaf910be7d/df7259fd287780c0-99/s540x810/c7780eac61f76bf37e7f8a8ccea85346f9790721.jpg" alt="image" data-orig-width="1800" data-orig-height="699"/></figure><p>GSoC is coming to an end. I’m glad to say that I’ve met all the goals as planned in the beginning. You can find out about it in my previous blog posts.<br/></p><p>This post is going to be a very brief report of all the things implemented, goals accomplished, some stuff that’s left to do and future plans.</p><p>My project was to implement a Data Visualization library in Swift (similar to matplotlib).

Before this project, no plotting framework had been written in Swift that could work on Linux, macOS, iOS, or the the other platforms Swift can target. A truly cross-platform Swift plotting framework was needed to fill a gap in the Swift data science ecosystem.

</p><p><b>GitHub link to project: </b><a href="https://github.com/KarthikRIyer/swiftplot">https://github.com/KarthikRIyer/swiftplot</a></p><figure data-orig-width="960" data-orig-height="540" class="tmblr-full"><img src="https://64.media.tumblr.com/12ae2a935a71abc42c514de8b8d2372a/df7259fd287780c0-71/s540x810/4ca23755472bfb7082fecf4c6ab6107723bc6daf.png" alt="image" data-orig-width="960" data-orig-height="540"/></figure><p><b>What work was done?</b></p><p>The following features were implemented:</p><p>1. LineChart <a href="https://github.com/KarthikRIyer/swiftplot/pull/4">#4</a></p><p>2. Plotting functions in LineChart <a href="https://github.com/KarthikRIyer/swiftplot/pull/11">#11</a></p><p>3. SVG Renderer and AGG Renderer as backends. <a href="https://github.com/KarthikRIyer/swiftplot/pull/21">#3</a></p><p>4. Secondary axis in LineChart. <a href="https://github.com/KarthikRIyer/swiftplot/pull/16">#16</a></p><p>5. Bar Chart (both vertical and horizontal, with hatching). <a href="https://github.com/KarthikRIyer/swiftplot/pull/21">#21</a> <a href="https://github.com/KarthikRIyer/swiftplot/pull/23">#23</a></p><p>6. Scatter Plot (with various scatter patterns). <a href="https://github.com/KarthikRIyer/swiftplot/pull/25">#25</a></p><p>7. Histogram <a href="https://github.com/KarthikRIyer/swiftplot/pull/30">#30</a></p><p>8. Improved aesthetics and text rendering using FreeType. <a href="https://github.com/KarthikRIyer/swiftplot/pull/33">#33</a></p><p>9. A set of examples, to make sure addition of code doesn’t break the existing code. (initiated in <a href="https://github.com/KarthikRIyer/swiftplot/pull/7">#7</a> with many updates in subsequent PRs).</p><p>10. A pure Swift library to generate Jupyter display messages. It is used to display base64 images in a Jupyter notebook. <a href="https://github.com/google/swift-jupyter/pull/67">#67</a></p><p><b>What’s left to do?</b></p><p>Although I’ve completed all the goals as planned, I have started work on a CoreGraphics rendering backend for the iOS and macOS platforms. The PR is currently under review, and little work is left before it is ready to be merged. <a href="https://github.com/KarthikRIyer/swiftplot/pull/35">#35</a></p><p>Also the updated documentation is yet to be merged. This PR has also been submitted for review. <a href="https://github.com/KarthikRIyer/swiftplot/pull/36">#36</a></p><p>Also, the latest work doesn’t work wih Jupyter Notebooks becuase it isn’t able to find the FreeType install on the system when in Jupyter. I haven’t been able to find a fix for this yet.</p><p><b>Future Work</b></p><p>These are some things I plan to work on, post GSoC:</p><p>1. Implement an OpenGL Rendering backend.</p><p>2. Work on adding support for real-time plotting. For example updating the plot while a machine learning model is training.</p><p>3. Implement more complex plot types, such as Contours and Fields.</p><p><b>Highlights and Challenges</b></p><ul><li><b>A flexible architecture</b>: This approach was slightly new to me. I had to implement an architecture that kept the rendering of primitives as far away from the plotting logic as possible. This provided the necessary flexibility to add more rendering backends when required.</li><li><b>Implementing a pure Swift display library for swift-jupyter</b>: It took me some time to understand how Jupyter worked. I hadn’t ever used Jupyter notebook before, let alone write a library for it. Once I understood how Jupyter worked it was relatively easy to get it to work. But I still faced a few hurdles which were a little tricky to debug. Like, when I was sending a serialized c-string to the Jupyter kernel, it had a next line delimiter at the end. This caused problems with the Jupyter kernel. I required help from my mentors to solve this issue. I also got to explore SHA256 hashing while working on this. It was necessary for message signing. I used IBM’s BlueCryptor library for SHA256.</li><li><b>Allowing more input data types</b>: Deciding which method to use to allow more input data types was time consuming. In the end we settled on generics. Implementing this also took some time, and it was a bit tricky to get the FloatConvertible protocol to work. FloatConvertible was a Swift protocol I wrote which took Numeric input which could be converted into Float. This isn’t perfect yet. It still has some trouble working with the Int Data type.</li><li><b>Working with FreeType</b>: Working with FreeType was a little tricky. I needed a method to draw custom fonts to improve the aesthetics of the plot. Although AGG provides methods that uses FreeType to draw text, I needed a way to use FreeType with Swift Package Manager. One way was to include FreeType with SwiftPlot, but I couldn’t get it to build with Swift Package Manager. FreeType had it’s own build configuration and also had some Python files. The other option was to make Swift Package Manager find the FreeType install on the system, which came with the necessary headers and the compiled binaries. After a lot of legwork I found a way to do that. The next hurdle here was to test it on the macOS platform. I didn’t have a Mac and when I got access to one I wasn’t able to install FreeType on it. After some more legwork I was able to build FreeType on my own and install it from there. This section is also not perfect yet. It isn’t able to find the FreeType install on the system when in a Jupyter Notebook.</li></ul><p><b>Conclusion</b></p><p>I got to learn a lot of things during the summers. I learnt a new language (Swift) and its conventions, approach to building flexible frameworks, how Jupyter works, and many more things. In other words I’ve had a great and productive summer, working under the guidance of the best mentors possible. Brad and Marc (my mentors) were very motivating and their solutions to my problems always worked! </p><p>It was a great feeling to see my project take shape from scratch and even greater to see the community showing interest in it right from the start. I will definitely keep working on this project post GSoC and would like to see a community growing around it, and people contributing to it.</p><p>I hope that this project comes to the next GSoC too so that it keeps on maturing and its reach increases more. I would be more than willing to help people get started.</p><p><br/></p><p>I’ll keep posting updates whenever there are any developments. So stay tuned!!</p>