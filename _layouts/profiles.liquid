---
layout: page
---
<div class="post">
  <article>
    {% if page.profiles %}
      {% for profile in page.profiles %}
        <hr>
        <div class="profile float-{% if profile.align == 'left' %}left{% else %}right{% endif %}">
          {% if profile.image %}
            {% assign profile_image_path = profile.image | prepend: 'assets/img/' %}
            {% if profile.image_circular %}
              {% assign profile_image_class = 'img-fluid z-depth-1 rounded-circle' %}
            {% else %}
              {% assign profile_image_class = 'img-fluid z-depth-1 rounded' %}
            {% endif %}
            {% capture sizes %}(min-width: {{ site.max_width }}) {{ site.max_width | minus: 30 | times: 0.3}}px, (min-width: 576px) 30vw, 95vw"{% endcapture %}
            {% include figure.liquid loading="eager" path=profile_image_path class=profile_image_class sizes=sizes alt=profile.image %}
          {% endif %}
          {% if profile.more_info %}
            <div class="more-info">{{ profile.more_info }}</div>
          {% endif %}
        </div>

    <!-- First Level Navigation: Status -->
    <div class="status-index">
      {% assign statuses = site.data.people | map: 'status' | uniq | sort %}
      {% for status in statuses %}
        <a href="#{{ status }}">{{ status }}</a>
        {% if forloop.last == false %}
          &nbsp;|&nbsp;
        {% endif %}
      {% endfor %}
    </div>

    <!-- Loop through each unique status -->
    {% for status in statuses %}
      <div class="status-section">
        <h2 id="{{ status }}">{{ status }}</h2>

        <!-- Assign people based on status and sort by last name -->
        {% assign people_in_status = site.data.people | where: "status", status | sort: 'dirLastName' %}
        {% assign people_count = people_in_status | size %}

        <!-- If number of people in the status group exceeds the threshold, show alphabetical index -->
        {% if people_count > threshold %}
          <!-- Second Level Navigation: Alphabetical -->
          <div class="letter-index">
            {% assign alphabet = "A,B,C,D,E,F,G,H,I,J,K,L,M,N,O,P,Q,R,S,T,U,V,W,X,Y,Z" | split: "," %}
            {% for letter in alphabet %}
              <a href="#{{ status }}-{{ letter }}">{{ letter }}</a>
              {% if forloop.last == false %}
                &nbsp;|&nbsp;
              {% endif %}
            {% endfor %}
          </div>
        {% endif %}

        <div class="profile-grid">
          {% assign current_letter = "" %}

          <!-- Loop through each person, sorted by last name -->
          {% for profile in people_in_status %}
            {% assign first_letter = profile.dirLastName | slice: 0, 1 | upcase %}

            <!-- If the alphabetical index is used and the first letter of the last name changes, create a new section with a heading -->
            {% if people_count > threshold and current_letter != first_letter %}
              <div class="letter-section">
                <h3 id="{{ status }}-{{ first_letter }}">{{ first_letter }}</h3>
              </div>
              {% assign current_letter = first_letter %}
            {% endif %}

            <div class="profile profile-column">
              <strong>{{ profile.dirFirstName }} {{ profile.dirLastName }}</strong><br>
              <strong>Department:</strong> {{ profile.department }}<br>
              <strong>Email:</strong> <a href="mailto:{{ profile.email }}">{{ profile.email }}</a>
            </div>
          {% endfor %}
        </div>
      </div>
    {% endfor %}
  </article>
</div>
