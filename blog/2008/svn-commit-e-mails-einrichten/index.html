<!DOCTYPE html>
<html lang="en">

  <!-- Head -->
  <head>    <!-- Metadata, OpenGraph and Schema.org -->
    
    <!-- Website verification -->
    <meta name="google-site-verification" content="r_l7npAYPpfg7XREZHkXx3kPCug6F1CnQILCoPX4KOU" />

    <!-- Standard metadata -->
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <title>svn - commit E-Mails einrichten | Andy Wenk</title>
    <meta name="author" content="Andy  Wenk" />
    <meta name="description" content="Personal website of Andy Wenk - Hamburg, Germany
" />
    <meta name="keywords" content="andywenk, digitalblast, sumcumo, CTO" />

    <!-- Schema.org -->
    <script type="application/ld+json">
      {
        "author":
        {
          "@type": "Person",
          "name": "Andy  Wenk"
        },
        "url": "https://www.andy-wenk.de/blog/2008/svn-commit-e-mails-einrichten/",
        "@type": "WebSite",
        "description": "Personal website of Andy Wenk - Hamburg, Germany
",
        "headline": "svn - commit E-Mails einrichten",
        "sameAs": ["https://scholar.google.com/citations?user=dqdo9MgAAAAJ", "https://github.com/andywenk", "https://www.linkedin.com/in/andreas-wenk-88773a239", "https://www.digitalblast.com"],
        "name": "Andy  Wenk",
        "@context": "https://schema.org"
      }
    </script>


    <!-- Bootstrap & MDB -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@4.6.1/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha256-DF7Zhf293AJxJNTmh5zhoYYIMs2oXitRfBjY+9L//AY=" crossorigin="anonymous">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/mdbootstrap@4.20.0/css/mdb.min.css" integrity="sha256-jpjYvU3G3N6nrrBwXJoVEYI/0zw8htfFnhT9ljN3JJw=" crossorigin="anonymous" />

    <!-- Fonts & Icons -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@5.15.4/css/all.min.css" integrity="sha256-mUZM63G8m73Mcidfrv5E+Y61y7a12O5mW4ezU3bxqW4=" crossorigin="anonymous">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/academicons@1.9.1/css/academicons.min.css" integrity="sha256-i1+4qU2G2860dGGIOJscdC30s9beBXjFfzjWLjBRsBg=" crossorigin="anonymous">
    <link rel="stylesheet" type="text/css" href="https://fonts.googleapis.com/css?family=Roboto:300,400,500,700|Roboto+Slab:100,300,400,500,700|Material+Icons">

    <!-- Code Syntax Highlighting -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/jwarby/jekyll-pygments-themes@master/github.css" media="none" id="highlight_theme_light" />

    <!-- Styles -->
    
    <link rel="shortcut icon" href="/assets/img/favicon.ico"/>
    
    <link rel="stylesheet" href="/assets/css/main.css">
    <link rel="canonical" href="https://www.andy-wenk.de/blog/2008/svn-commit-e-mails-einrichten/">
    
    <!-- Dark Mode -->
    
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/jwarby/jekyll-pygments-themes@master/native.css" media="none" id="highlight_theme_dark" />

    <script src="/assets/js/theme.js"></script>
    <script src="/assets/js/dark_mode.js"></script>
    

  </head>

  <!-- Body -->
  <body class="fixed-top-nav ">

    <!-- Header -->
    <header>

      <!-- Nav Bar -->
      <nav id="navbar" class="navbar navbar-light navbar-expand-sm fixed-top">
        <div class="container">
          <a class="navbar-brand title font-weight-lighter" href="https://www.andy-wenk.de/">Andy Wenk</a>
          <!-- Navbar Toggle -->
          <button class="navbar-toggler collapsed ml-auto" type="button" data-toggle="collapse" data-target="#navbarNav" aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation">
            <span class="sr-only">Toggle navigation</span>
            <span class="icon-bar top-bar"></span>
            <span class="icon-bar middle-bar"></span>
            <span class="icon-bar bottom-bar"></span>
          </button>

          <div class="collapse navbar-collapse text-right" id="navbarNav">
            <ul class="navbar-nav ml-auto flex-nowrap">

              <!-- About -->
              <li class="nav-item ">
                <a class="nav-link" href="/">About</a>
              </li>
              
              <!-- Blog -->
              <li class="nav-item active">
                <a class="nav-link" href="/blog/">Blog<span class="sr-only">(current)</span></a>
              </li>

              <!-- Other pages -->
              <li class="nav-item ">
                <a class="nav-link" href="/activities/">Activities</a>
              </li>
              <li class="nav-item ">
                <a class="nav-link" href="/publications/">Publications</a>
              </li>

              <!-- Toogle theme mode -->
              <div class="toggle-container">
                <a id="light-toggle">
                  <i class="fas fa-moon"></i>
                  <i class="fas fa-sun"></i>
                </a>
              </div>
            </ul>
          </div>
        </div>
      </nav>
    </header>

    <!-- Content -->
    <div class="container mt-5">
      <!-- _layouts/post.html -->

<div class="post">

  <header class="post-header">
    <h1 class="post-title">svn - commit E-Mails einrichten</h1>
    <p class="post-meta">November 22, 2008</p>
    <p class="post-tags">
      <a href="/blog/2008"> <i class="fas fa-calendar fa-sm"></i> 2008 </a>
        ·  
        <a href="/blog/tag/svn">
          <i class="fas fa-hashtag fa-sm"></i> svn</a>  
          <a href="/blog/tag/commitmails">
          <i class="fas fa-hashtag fa-sm"></i> commitmails</a>  
          
        ·  
        <a href="/blog/category/Server">
          <i class="fas fa-tag fa-sm"></i> Server</a>  
          

    </p>
  </header>

  <article class="post-content">
    <p>Moin Moin,</p>

<p>na weil das Thema svn so spannend ist, hier gleich noch ein kleines HOW TO für das Einrichten von commit E-Mails. Das heisst, jedes mal wenn ein svn commit ausgeführt wird, wird eine E-Mail an eine oder mehrere Personen geschickt.</p>

<h3>1. subversion-tools installieren</h3>

<p>Zuerst muss eine Erweiterung für Subversion installiert werden. Auf einem Debian System nutzen wir wieder den Paketmanager apt oder aptitude.</p>

<pre>
root@server: apt-get install subversion-tools
</pre>

<h3>2. email Adresse in commit-email.pl angeben</h3>

<p>Nun suchen wir den Ordner in welchem die Datei commit-email.pl liegt. Der Ordner heisst hook-scripts.</p>

<pre>root@server: dpgk -L subversion-tools
[...]
/usr/share/subversion/hook-scripts/commit-email.pl
[...]
</pre>

<p>Das merken wir uns. Als nächstes wechseln wir in das Verzeichnis, in welchem unser svn Repository liegt und dort in den Ordner hooks:</p>

<pre>
root@server:cd /var/lib/svn/repo1/hooks
root@server:/var/lib/svn/repo1/hooks#
</pre>

<p>Dort kopieren wir jetzt die Datei post-commit.tmpl zu post-commit und bearbeiten diese:</p>

<pre>
root@server:/var/lib/svn/repo1/hooks# cp post-commit.tmpl post-commit
root@server:/var/lib/svn/repo1/hooks# chmod 755 post-commit
root@server:/var/lib/svn/repo1/hooks# vi post-commit
</pre>

<p>Letztendlich müssen wir nur ein paar Zeilen am Ende der Datei einfügen:</p>

<pre>
#!/bin/sh
# POST-COMMIT HOOK
#
# The post-commit hook is invoked after a commit.  Subversion runs
# this hook by invoking a program (script, executable, binary, etc.)
# named 'post-commit' (for which this file is a template) with the
# following ordered arguments:
#
#   [1] REPOS-PATH   (the path to this repository)
#   [2] REV          (the number of the revision just committed)
#
[...]

REPOS="$1"
REV="$2"

/usr/share/subversion/hook-scripts/commit-email.pl $REPOS $REV --from svn@emailadr.com meine@mailadr.com
</pre>

<p>Was passiert hier? Nach dem subversion einen commit abgefeuert hat, wird dieses script post-commit aufgerufen. Dem script werden zwei Parameter übergeben. Erstens der Pfad zum repositroy in $1 und zweitens die Revision Nummer in $2. Danach wird das Perl script commit-email.pl aufgerufen (deshalb haben wir uns den Pfad dorthin gemerkt) wobei wiederum Parameter übergeben werden. Zuerst der Pfad zum Repository, die revision Nummer, eine “From:” E-Mail Adresse und den Empfänger. Es können noch weitere Parameter angegeben werden. Um alle Optionen zu sehen, einfach mal in das verzeichnis wechseln in welchem das PERL Script liegt und ausführen:</p>

<pre>
root@server: cd /usr/share/subversion/hook-scripts/
root@server:/usr/share/subversion/hook-scripts# perl ./commit-email.pl
./commit-email.pl: too few arguments.
usage (commit mode):
  ./commit-email.pl REPOS REVNUM [[-m regex] [options] [email_addr ...]] ...
usage: (revprop-change mode):
  ./commit-email.pl --revprop-change REPOS REVNUM USER PROPNAME [-d diff_file] \
    [[-m regex] [options] [email_addr ...]] ...
options are:
  --from email_address  Email address for 'From:' (overrides -h)
  -h hostname           Hostname to append to author for 'From:'
  -l logfile            Append mail contents to this log file
  -m regex              Regular expression to match committed path
  -r email_address      Email address for 'Reply-To:'
  -s subject_prefix     Subject line prefix
  --diff y|n            Include diff in message (default: y)
                        (applies to commit mode only)

[... weiter Erklärungen]
</pre>

<h3>Verbesserung</h3>

<p>Momentan ist das ganze so eingestellt, dass die E-Mail an einen Empfänger geht. Denkbar bzw. sinvoller ist es aber, das an eine Mailinglist E-Mail Adresse zu senden. Dann erhalten alle Beteiligten Entwickler die E-mail und können nachverfolgen, wer was wann geändert oder gecoded hat.</p>

<p>Andreas</p>

  </article>

</div>

    </div>

    <!-- Footer -->    
    <footer class="fixed-bottom">
      <div class="container mt-0">
        © Copyright 2022 Andy  Wenk. Powered by <a href="https://jekyllrb.com/" target="_blank" rel="noopener noreferrer">Jekyll</a> with <a href="https://github.com/alshedivat/al-folio" target="_blank" rel="noopener noreferrer">al-folio</a> theme.
Last updated: September 23, 2022.
      </div>
    </footer>

    <!-- JavaScripts -->
    <!-- jQuery -->
  <script src="https://cdn.jsdelivr.net/npm/jquery@3.6.0/dist/jquery.min.js" integrity="sha256-/xUj+3OJU5yExlq6GSYGSHk7tPXikynS7ogEvDej/m4=" crossorigin="anonymous"></script>

    <!-- Bootsrap & MDB scripts -->
  <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.11.2/dist/umd/popper.min.js" integrity="sha256-l/1pMF/+J4TThfgARS6KwWrk/egwuVvhRzfLAMQ6Ds4=" crossorigin="anonymous"></script>
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@4.6.1/dist/js/bootstrap.min.js" integrity="sha256-SyTu6CwrfOhaznYZPoolVw2rxoY7lKYKQvqbtqN93HI=" crossorigin="anonymous"></script>
  <script src="https://cdn.jsdelivr.net/npm/mdbootstrap@4.20.0/js/mdb.min.js" integrity="sha256-NdbiivsvWt7VYCt6hYNT3h/th9vSTL4EDWeGs5SN3DA=" crossorigin="anonymous"></script>

    <!-- Masonry & imagesLoaded -->
  <script defer src="https://cdn.jsdelivr.net/npm/masonry-layout@4.2.2/dist/masonry.pkgd.min.js" integrity="sha256-Nn1q/fx0H7SNLZMQ5Hw5JLaTRZp0yILA/FRexe19VdI=" crossorigin="anonymous"></script>
  <script defer src="https://cdn.jsdelivr.net/npm/imagesloaded@4/imagesloaded.pkgd.min.js"></script>
  <script defer src="/assets/js/masonry.js" type="text/javascript"></script>
    
  <!-- Medium Zoom JS -->
  <script src="https://cdn.jsdelivr.net/npm/medium-zoom@1.0.6/dist/medium-zoom.min.js" integrity="sha256-EdPgYcPk/IIrw7FYeuJQexva49pVRZNmt3LculEr7zM=" crossorigin="anonymous"></script>
  <script src="/assets/js/zoom.js"></script><!-- Load Common JS -->
  <script src="/assets/js/common.js"></script>

    

    <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=G-K0TB1250EC"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag() { dataLayer.push(arguments); }
    gtag('js', new Date());
    gtag('config', 'G-K0TB1250EC');
  </script>
  </body>
</html>
