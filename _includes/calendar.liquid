{% if site.calendar.enabled %}
<div class="post mt-4">
  <h2 class="mb-3">
    <i class="fas fa-calendar-alt"></i> Upcoming Events
  </h2>

  <button 
    class="btn btn-sm btn-outline-primary mb-3"
    onclick="toggleCalendar()"
    id="calendar-toggle-btn">
    Show Calendar
  </button>

  <div class="calendar-wrapper" id="calendar-container" style="display: none;">
    <iframe 
      src="https://calendar.google.com/calendar/embed?src={{ site.calendar.calendar_id | uri_escape }}&ctz={{ site.calendar.timezone | default: 'UTC' }}&mode=WEEK&showTitle=0&showPrint=0&showCalendars=0&showTabs=0&bgcolor=%23f9f9f9"
      style="{{ site.calendar.style | default: 'border:0; width:100%; height:600px;' }}"
      frameborder="0" 
      scrolling="no">
    </iframe>
  </div>
</div>

<script>
  function toggleCalendar() {
    const el = document.getElementById('calendar-container');
    const btn = document.getElementById('calendar-toggle-btn');
    const isHidden = el.style.display === 'none';
    el.style.display = isHidden ? 'block' : 'none';
    btn.innerText = isHidden ? 'Hide Calendar' : 'Show Calendar';
  }
</script>
{% endif %}
